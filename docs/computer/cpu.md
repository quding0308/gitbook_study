## CPU

### 简介

![img](/asserts/img/cpu2.png)

### 相关概念

#### 时钟周期

Clock Cycle ，机器的主频。

例如主频为 1.8 GHz，意味着 CPU 1s 内运算 1.8 * 10^9 次

#### 指令周期

Instruction Cycle ， 执行一条指令的周期。

计算机执行一条指令，包括 3 个步骤：

1. Fetch（取得指令），也就是从 PC 寄存器里找到对应的指令地址，根据指令地址从内存里把具体的指令，加载到指令寄存器中，然后把 PC 寄存器自增，好在未来执行下一条指令。（控制器）
2. Decode（指令译码），也就是根据指令寄存器里面的指令，解析成要进行什么样的操作，是 R、I、J 中的哪一种指令，具体要操作哪些寄存器、数据或者内存地址。（控制器）
3. Execute（执行指令），也就是实际运行对应的 R、I、J 这些特定的指令，进行算术逻辑操作、数据传输或者直接的地址跳转。（运算器）

#### ALU

算术逻辑单元。也即 【运算器】。

#### 延迟比较

参考：https://colin-scott.github.io/personal_website/research/interactive_latency.html

``` shell
L1 Cache 1ns
L2 Cache 4ns

Mutex Lock / Unlock 17ns

主存 操作一次 100ns

SSD 随机读取 16000 ns
从 SSD 读取 1M 数据 49000 ns = 49 vs

机械硬盘随机读取 2,000,000 ns
从机械硬盘读取 1M 数据 825000 ns = 825 vs

```

### 寄存器

CPU 本身只负责运算，不负责储存数据。数据一般都储存在内存之中，CPU 要用的时候就去内存读写数据。但是，CPU 的运算速度远高于内存的读写速度，为了避免被拖慢，CPU 都自带一级缓存和二级缓存。基本上，CPU 缓存可以看作是读写速度较快的内存。

但是，CPU 缓存还是不够快，另外数据在缓存里面的地址是不固定的，CPU 每次读写都要寻址也会拖慢速度。因此，除了缓存之外，CPU 还自带了寄存器（register），用来储存最常用的数据。也就是说，那些最频繁读写的数据（比如循环变量），都会放在寄存器里面，CPU 优先读写寄存器，再由寄存器跟内存交换数据。


寄存器不依靠地址区分数据，而依靠名称。每一个寄存器都有自己的名称，我们告诉 CPU 去具体的哪一个寄存器拿数据，这样的速度是最快的。

#### PC 寄存器

用于存储下一条命指令的地址。




### 参考

